<!--
Encore Solo – PWA (iPad‑optimoitu) v1.0.0
Tiedostot tässä dokumentissa:
1) index.html  (tämä tiedosto)
2) app.js
3) manifest.json
4) service-worker.js
5) icons/encore-192.png (base64 -> tallenna tiedostoksi)
6) icons/encore-512.png (base64 -> tallenna tiedostoksi)

Kopioi kunkin osion sisältö omaan tiedostoonsa.
-->

<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>Encore! (Solo) – PWA</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="apple-touch-icon" href="icons/encore-192.png" />
  <meta name="theme-color" content="#e9eef7" />
  <style>
    :root{
      --bg:#f2f4fa; --panel:#e9eef7; --ink:#141414; --muted:#6b7280; --accent:#1459d9;
      --ok:#2e7d32; --warn:#b23c17; --btn:#7a7a7a; --white:#fff;
    }
    html,body{height:100%; margin:0;}
    body{font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--ink);}
    .wrap{max-width:1200px; margin:0 auto; padding:16px; box-sizing:border-box;}
    header{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px;}
    h1{font-size:20px; margin:0;}
    #installBtn{display:none;}
    .btn{border:none; border-radius:10px; padding:10px 14px; color:var(--white); background:var(--btn); font-weight:600; cursor:pointer}
    .btn:active{transform:translateY(1px)}

    .layout{display:grid; grid-template-columns: 1fr 380px; gap:16px;}
    @media (max-width: 980px){ .layout{grid-template-columns: 1fr;} }

    .board{background:#fafafc; border-radius:10px; padding:8px; box-shadow:0 1px 2px rgba(0,0,0,.05); position:relative;}
    .grid{display:grid; gap:1px; background:#000; border-radius:6px; overflow:hidden;}
    .cell{width:100%; aspect-ratio:1/1; display:flex; align-items:center; justify-content:center; position:relative;}
    .cell .mark{position:absolute; inset:0;}
    .cell .mark:before, .cell .mark:after{content:""; position:absolute; left:6px; right:6px; height:2px; background:#000; top:50%; transform-origin:center;}
    .cell .mark:before{transform:rotate(45deg);} .cell .mark:after{transform:rotate(-45deg);} 
    .cell.pending{outline:2px solid #fff; outline-offset:-2px}
    .hcol{position:absolute; top:0; bottom:0; left:calc((var(--hcol))*1fr);}

    .panel{background:var(--panel); border-radius:12px; padding:12px; box-shadow:0 1px 2px rgba(0,0,0,.05);}
    .section{margin-bottom:14px}
    .title{font-weight:700;}

    .diceRow{display:flex; gap:10px; margin-top:8px;}
    .die{flex:0 0 120px; height:40px; border-radius:8px; background:#e0e0e0; border:1px solid #555; display:flex; align-items:center; justify-content:flex-start; padding:6px 10px; box-sizing:border-box; cursor:pointer;}
    .die.selected{outline:3px solid var(--accent)}
    .die .swatch{width:26px; height:26px; border-radius:6px; border:1px solid #000; margin-right:8px;}

    .rowBtns{display:flex; gap:10px;}
    .btnOk{background:var(--ok);} .btnGo{background:var(--accent);} .btnNew{background:#7a7a7a; width:100%;}

    .status{background:#eef3fb; border:1px solid #bdbdbd; border-radius:8px; padding:8px;}
    .statusGrid{display:grid; grid-template-columns: repeat(3, 1fr); gap:8px;}
    .muted{color:var(--muted)}

    /* iPad optimointi: skaalataan solukokoa jotta 15x7 + status mahtuu pysty/vaaka */
    :root { --cell: 36px; }
    @media (min-width: 1024px){ :root{ --cell: 44px; } }
    .grid{ grid-template-columns: repeat(15, var(--cell));}

    /* Dialogi */
    .dlgMask{position:fixed; inset:0; background:rgba(0,0,0,.5); display:none; align-items:center; justify-content:center; z-index:1000}
    .dlg{background:#fff; border-radius:12px; padding:16px; width:min(360px, 90vw); border:2px solid #555}
    .dlg h2{margin:0 0 10px 0; font-size:18px}
    .dlg .actions{display:flex; gap:10px; justify-content:flex-end}

    /* Tähtikuvio */
.star{
  position:absolute;
  left:15%; right:15%;
  top:15%; bottom:15%;
  pointer-events:none;
  z-index:3;              /* nosta tähdet X-merkinnän yläpuolelle */
}
.star svg{ display:block; width:100%; height:100%; }

  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Encore! (Solo) – PWA</h1>
      <button id="installBtn" class="btn">Asenna sovellukseksi</button>
    </header>

    <div class="layout">
      <div>
        <div class="board">
          <div id="grid" class="grid" aria-label="Pelikenttä 15x7"></div>
          <div class="status" style="margin-top:8px;">
            <div class="statusGrid">
              <div><span class="muted">Sarakkeet:</span> <span id="colPts">0</span></div>
              <div><span class="muted">Tähdet:</span> <span id="starsLine">-2 × 0</span></div>
              <div><span class="muted">Vuoro:</span> <span id="turn">1 / 30</span></div>
              <div><span class="muted">Värit:</span> <span id="colorPts">0</span></div>
              <div><span class="muted">Jokerit:</span> <span id="jokers">8</span></div>
              <div><strong>Pisteet:</strong> <span id="total">0</span></div>
            </div>
          </div>
        </div>
      </div>

      <aside class="panel">
        <div class="section"><div class="title">Väri‑nopat</div>
          <div id="colorRow" class="diceRow"></div>
        </div>
        <div class="section"><div class="title">Lukumäärä‑nopat</div>
          <div id="numRow" class="diceRow"></div>
        </div>
        <div class="section rowBtns">
          <button id="rollBtn" class="btn btnOk">Heitä nopat</button>
          <button id="confirmBtn" class="btn btnGo">Vahvista siirto</button>
        </div>
        <div class="section">
          <button id="newBtn" class="btn btnNew">Uusi peli</button>
        </div>
        <div class="section">
          <div id="msg" class="muted"></div>
        </div>
      </aside>
    </div>
  </div>

  <!-- Dialogi: Uusi peli? -->
  <div id="dlgMask" class="dlgMask" role="dialog" aria-modal="true">
    <div class="dlg">
      <h2>Aloitetaanko uusi peli?</h2>
      <p>Tämä nollaa nykyisen pelin.</p>
      <div class="actions">
        <button id="dlgNo" class="btn" style="background:#a33">Ei</button>
        <button id="dlgYes" class="btn" style="background:#2d7">Kyllä</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
